{% load static %}
<div id="sidebar" class="hidden">
  <div id="sidebar-content">
    {% if not user.is_authenticated %}
      <div class="logo-container">
        <img src="{% static 'icons\logo.svg' %}" alt="">
      </div>
      <a href="{% url 'home' %}" class="category-link">Home</a>
      <a href="{% url 'category_view' 1 %}" class="category-link">Latest News</a>
      <a href="{% url 'category_view' 2 %}" class="category-link">Sports</a>
      <a href="{% url 'category_view' 3 %}" class="category-link">Entertainment</a>
      <a href="{% url 'category_view' 6 %}" class="category-link">Opinion</a>
      <a href="{% url 'category_view' 8 %}" class="category-link">Featured Topics</a>
      <a href="{% url 'category_view' 9 %}" class="category-link">Environment</a>
      <a href="{% url 'category_view' 7 %}" class="category-link">Editorials</a>
      <a href="{% url 'category_view' 10 %}" class="category-link">Science & Tech.</a>
      <a href="{% url 'category_view' 4 %}" class="category-link">Technology</a>
      <a href="{% url 'category_view' 5 %}" class="category-link">Lifestyle</a> 
    {% else %}
      {% include 'profile-picture.html' with profile=request.user.userprofile %}
      <h2 class="user-full-name">
        {{ request.user.userprofile.first_name }} {{ request.user.userprofile.last_name }}
      </h2>
      {% if not request.user.userprofile.is_reader %}
      <div class="designation">
          <p>
            {% if request.user.userprofile.is_writer %}
              Writer
            {% elif request.user.userprofile.is_editor %}
              Editor
            {% endif %}
          </p>
      </div>
      {% endif %}
      <a href="{% url 'view_profile' request.user.userprofile.id %}" class="category-link">Profile</a>
      {% if request.user.userprofile.is_writer %}
      <a href="{% url 'writer_dashboard' %}" class="category-link">Dashboard</a>
      {% elif request.user.userprofile.is_editor %}
      <a href="{% url 'editor_dashboard' %}" class="category-link">Dashboard</a>
      {% endif %}
    {% endif %}


      
     

    {% if not user.is_authenticated %}
      <a class="auth-btn" id="join-btn" href="{% url 'login' %}?from_sidebar=True">Join the Tribune</a>
    {% else %}
    <form method="POST" action="{% url 'logout' %}">
      {% csrf_token %}
      <button type="submit" class="auth-btn">
          Log out
      </button>
    </form>
      <a href="{% url 'login'%}" class="category-link" style="background-color: #596E9B; color: white;">Sign in</a>
    {% endif %}


  </div>
</div>

<script>
  function openSidebar() {
    const sidebar = document.getElementById('sidebar');
    const popupContent = document.getElementById('sidebar-content');
    
    sidebar.classList.remove('hidden');
    sidebar.style.display = 'block';
    
    // Trigger reflow to ensure animation works
    popupContent.offsetWidth;
    
    popupContent.style.transform = 'translateX(0)';
  }

  document.getElementById('sidebar').addEventListener('click', function(event) {
    const sidebar = this;
    const popupContent = document.getElementById('sidebar-content');
    
    // Close sidebar if clicked outside the popup content
    if (event.target === sidebar) {
        popupContent.style.transform = 'translateX(-100%)';
        
        // Wait for animation to complete before hiding
        setTimeout(() => {
            sidebar.classList.add('hidden');
            sidebar.style.display = 'none';
        }, 300);
    }
  });
</script>
