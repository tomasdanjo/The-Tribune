{% extends 'base.html' %}

{% block title %}
    
{% endblock %}

{% block style %}
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/base.css' %}"> 
    <link rel="stylesheet" href="{% static 'css/full_article_view.css' %}"> 
    <link rel="stylesheet" href="{% static 'css/draft.css' %}"> 

{% endblock %}

{% block content %}


{% include 'header.html' %}


{% include 'edit-write-article-form.html' with article=article %}



<script>
    function validateForm() {
        const headline = document.getElementById('{{ article_form.headline.id_for_label }}');
        const content = document.getElementById('{{ article_form.content.id_for_label }}');
        const editor = document.getElementById('editor');
        const tag = document.getElementById('{{ tag_form.tag_name.id_for_label }}');
        const category = document.getElementById('{{ article_form.category.id_for_label }}');
        const photo = document.getElementById('{{ photo_form.photo.id_for_label }}');

        // Check if fields are empty
        if (!headline.value.trim()) {
            alert("Please fill in the headline.");
            headline.focus();
            return false; // Prevent form submission
        }
        if (!content.value.trim()) {
            alert("Please fill in the content.");
            content.focus();
            return false; // Prevent form submission
        }
        if (editor.value === "") {
            alert("Please select an editor.");
            editor.focus();
            return false; // Prevent form submission
        }
        if (!tag.value.trim()) {
            alert("Please fill in the tag.");
            tag.focus();
            return false; // Prevent form submission
        }
        if (!category.value.trim()) {
            alert("Please select a category.");
            category.focus();
            return false; // Prevent form submission
        }

        // All checks passed, allow form submission
        return true;
    }

    function autoResize(textarea) {
    // Reset height to default
    textarea.style.height = '2.5rem';
    
    // If content exceeds one line, expand
    textarea.style.height = `${textarea.scrollHeight}px`;
}

document.addEventListener('DOMContentLoaded', () => {
    const textareas = document.querySelectorAll('textarea.textarea');
    
    textareas.forEach(textarea => {
        // Initial auto-resize
        autoResize(textarea);
        
        // Add event listeners for input and change
        textarea.addEventListener('input', () => autoResize(textarea));
        textarea.addEventListener('change', () => autoResize(textarea));
    });
});
</script>

{% endblock %}
